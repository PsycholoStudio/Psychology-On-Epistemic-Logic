# 第3章第4節　対応理論 【基本】

## 学習目標

この節では、様相論理の公理とフレーム条件の間の深い対応関係を学習します。具体的には、サールクヴィストの定理による一般的対応の理解、公理からフレーム条件を導出する方法の習得、逆にフレーム条件から公理を特定する技法の理解、そして対応理論が持つ理論的・実践的意義の認識を目標とします。

!!! summary "本節の概要"

    **構文と意味の架け橋**：対応理論により、様相論理の公理（構文）とフレーム条件（意味）の間の体系的な関係が明らかになる。
    
    **サールクヴィストの定理**：特定の形式を持つ公理が一階述語論理で表現可能なフレーム条件と対応することを保証する。
    
    **双方向の分析**：公理からフレーム条件を、フレーム条件から公理を導出する方法により、様相論理の理解が深まる。

---

[前節](3-3-proof-theory.md)までで様相論理の証明論を学びましたが、この節では、構文論と意味論を結ぶ最も美しい理論の一つである**対応理論**（Correspondence Theory）を探求します。この理論は、抽象的な論理公理と具体的な数学的構造の間の驚くべき関係を明らかにします。

## 3.4.1 対応現象の発見

### 公理とフレーム性質の不思議な一致

様相論理の研究において最も魅力的な発見の一つは、論理公理とフレーム性質の間の規則的な対応関係です。この発見は偶然ではなく、論理の深い構造を反映しています。

例えば、T公理 \(\Box p \to p\) を考えてみましょう。この公理は「必然的にpならばp」という直観的な原理を表現していますが、驚くべきことに、この公理が妥当となるフレームは、ちょうど反射性を持つフレームと一致します。同様に、4公理 □p → □□p は推移性と、5公理 ◇p → □◇p はユークリッド性と対応します。

この対応は単なる偶然の一致ではありません。論理公理が表現する抽象的な原理と、フレーム条件が表現する具体的な構造の間には、深い数学的関係が存在するのです。この関係を体系的に研究するのが対応理論です。

### 対応の直観的理解

対応関係を直観的に理解するために、地図と地形の関係を考えてみましょう。地図上の記号（公理）は、実際の地形の特徴（フレーム条件）と対応しています。等高線は山の傾斜を、青い線は川を表すように、様相論理の公理はフレームの構造的特徴を表現しているのです。

この比喩をさらに押し進めると、対応理論は「地図記号の文法」と「地形の幾何学」の間の関係を研究する学問と言えるでしょう。ある種の地図記号の組み合わせは、特定の地形パターンとしか対応しないという規則性があるのです。

### 対応理論の意義

対応理論の意義は、単に興味深い数学的関係を発見することにとどまりません。この理論により、以下のような重要な成果が得られます。

第一に、**体系の設計指針**が得られます。特定の性質を持つシステムをモデル化したい場合、対応するフレーム条件を満たす公理を選択すれば良いのです。例えば、時間の推移をモデル化したければ、推移性に対応する4公理を採用します。

第二に、**完全性証明の系統的方法**が提供されます。公理とフレーム条件の対応が分かれば、健全性と完全性の証明が機械的に実行できる場合があります。

第三に、**論理体系の分類**が可能になります。公理の組み合わせとフレームクラスの対応により、様相論理の風景を体系的に理解できます。

---

## 3.4.2 基本的な対応関係

### 単純な公理の対応

まず、最も基本的な公理とフレーム条件の対応を詳しく見ていきましょう。これらの対応は、対応理論の基礎となる重要な例です。

!!! note "定義3.4.1 —— 基本的な対応関係"

    | 公理 | 公理の名前 | フレーム条件 | 条件の名前 |
    |------|------------|--------------|------------|
    | □p → p | T公理 | ∀w(wRw) | 反射性 |
    | □p → □□p | 4公理 | ∀w,v,u(wRv ∧ vRu → wRu) | 推移性 |
    | p → □◇p | B公理 | ∀w,v(wRv → vRw) | 対称性 |
    | □p → ◇p | D公理 | ∀w∃v(wRv) | 系列性 |
    | ◇p → □◇p | 5公理 | ∀w,v,u(wRv ∧ wRu → vRu) | ユークリッド性 |

### T公理と反射性の対応証明

T公理 □p → p が反射性と対応することを詳しく証明してみましょう。この証明は、対応理論の基本的な手法を理解する上で重要です。

**健全性の方向**（反射性 ⇒ T公理の妥当性）：フレーム \(F = \langle W, R \rangle\) が反射的であるとします。任意のモデル \(M = \langle F, V \rangle\) と世界 \(w \in W\) を考えます。\(M, w \vDash \Box p\) と仮定すると、\(w\)から到達可能なすべての世界で\(p\)が真となります。反射性により \(wRw\) なので、\(w\)自身でも\(p\)が真でなければなりません。したがって \(M, w \vDash p\) となり、T公理が妥当です。

**完全性の方向**（T公理の妥当性 ⇒ 反射性）：T公理がフレーム F で妥当であるとします。任意の世界 w ∈ W に対して、反射性 wRw を示します。背理法により、¬(wRw) と仮定します。付値 V(p) = {v : wRv} を定義すると、w ∉ V(p) となります。このモデルで M, w ⊨ □p（wから到達可能な世界でpが真）ですが、M, w ⊭ p（w自身ではpが偽）となり、T公理に反します。したがって wRw が成り立ちます。

この証明手法は、他の対応関係にも適用できる一般的なパターンを示しています。

### 複合的な対応

複数の公理を組み合わせると、より複雑なフレーム条件が得られます。

**S4 = T + 4**の場合、反射性と推移性を組み合わせた「前順序」（preorder）が対応します。前順序は、自己ループを持ち、間接的な到達可能性が直接的な到達可能性を含意する構造です。

**S5 = T + 5**（または S4 + 5）の場合、同値関係が対応します。同値関係は反射性、対称性、推移性をすべて満たし、可能世界を完全に分離されたクラスに分割します。

これらの複合的な対応は、単純な対応の組み合わせ以上の意味を持ちます。例えば、S5の同値関係は、各同値類内で完全な相互到達可能性を保証し、これが S5 における様相の崩壊現象と密接に関連しています。

---

## 3.4.3 サールクヴィストの定理

### 一般的な対応の保証

Henrik Sahlqvist（サールクヴィスト）による画期的な定理は、対応理論に強力な一般的枠組みを提供しました。この定理により、広いクラスの公理について、対応するフレーム条件の存在が保証されます。

!!! abstract "定理3.4.1 —— サールクヴィストの定理"

    **サールクヴィスト公式**と呼ばれる特定の形式を持つ様相論理式は：
    
    1. **局所対応**：一階述語論理で表現可能なフレーム条件と対応する
    2. **完全性**：対応するフレームクラスに関して完全である
    3. **有限モデル性**：有限モデル性を持つ
    
    **意義**：機械的に対応を見つけられる公式の広いクラスを特定

### サールクヴィスト公式の構造

サールクヴィスト公式は、特定の構文的パターンを持つ公式です。直観的には、「肯定的な部分と否定的な部分が適切に分離された」公式と理解できます。

典型的なサールクヴィスト公式の例として、□p → □□p（4公理）を考えてみましょう。この公式は □p（否定的部分）→ □□p（肯定的部分）という形をしており、前件の様相演算子が単純で、後件がそれを拡張する形になっています。

より複雑な例として、□(□p → q) ∨ □(□q → p) という公式もサールクヴィスト公式です。この公式は「線形性」（任意の二つの世界が比較可能）というフレーム条件に対応します。

### アルゴリズム的対応計算

サールクヴィストの定理の重要な帰結は、対応の**アルゴリズム化**です。サールクヴィスト公式が与えられたとき、対応するフレーム条件を機械的に計算できます。

このアルゴリズムは「消去法」と呼ばれる手法を使用します。公式を標準形に変換し、命題変数を適切な一階述語に置き換え、段階的に簡約することで、最終的にフレーム条件を得ます。

例えば、◇□p → □◇p（Church-Rosser性）からフレーム条件を導出する過程は以下のようになります：公式を一階論理に翻訳し、∀p∀w(∃v(wRv ∧ ∀u(vRu → p(u))) → ∀v(wRv → ∃u(vRu ∧ p(u))))、命題変数pを消去し、最終的に ∀w,v,v'(wRv ∧ wRv' → ∃u(vRu ∧ v'Ru))（合流性）を得ます。

### サールクヴィスト定理の限界

サールクヴィストの定理は強力ですが、すべての対応を捉えるわけではありません。サールクヴィスト公式でない公式の中にも、フレーム条件と対応するものがあります。

例えば、McKinsey公式 □◇p → ◇□p は、サールクヴィスト公式ではありませんが、特定のフレーム条件（無限深さの不在）と対応します。このような非サールクヴィスト対応の研究は、現在も活発な研究分野です。

---

## 3.4.4 逆対応の問題

### フレーム条件から公理へ

対応理論のもう一つの重要な側面は、**逆対応**の問題です。つまり、与えられたフレーム条件に対して、それを特徴づける公理を見つけることです。

この問題は、実践的な観点から特に重要です。現実のシステムをモデル化する際、まずシステムの構造的性質（フレーム条件）が明らかになり、それに対応する論理体系（公理）を構築したい場合があるからです。

### 定義可能性の問題

すべてのフレーム条件が様相論理で定義可能なわけではありません。実際、一階述語論理で表現可能なフレーム条件の中でも、様相論理では定義できないものが存在します。

例えば、「到達可能性関係が非循環的である」という条件は、一階述語論理では \(\lnot\exists w_1,...,w_n(w_1Rw_2 \land \cdots \land w_nRw_1)\) と表現できますが、有限の様相論理式では定義できません。これは、様相論理の表現力の限界を示しています。

### Goldblatt-Thomason定理

Robert Goldblatt と Steven Thomason による定理は、様相論理で定義可能なフレームクラスを特徴づけます。

!!! abstract "定理3.4.2 —— Goldblatt-Thomason定理"

    基本様相言語で定義可能なフレームクラスは、以下の条件を満たす：
    
    1. **有界射による閉包**：有界射で閉じている
    2. **disjoint union による閉包**：非交和で閉じている
    3. **generated subframe による閉包**：生成部分フレームで閉じている
    4. **ultrafilter extension の反映**：超フィルター拡大を反映する
    
    **意義**：様相論理の表現力の正確な特徴づけ

この定理により、様相論理で表現可能な性質と表現不可能な性質を明確に区別できます。例えば、有限性、連結性、非循環性などは様相論理では表現できないことが分かります。

### 実用的な逆対応の手法

実践的には、以下の手法で逆対応を見つけることができます：

**パターンマッチング**：既知の対応のカタログを参照し、類似のフレーム条件を探します。多くの場合、既存の公理の変形で対応する公理が見つかります。

**試行錯誤と検証**：候補となる公理を提案し、健全性と完全性を証明することで対応を確認します。自動定理証明器を使用して、この過程を支援できます。

**複合的構成**：複雑なフレーム条件を単純な条件の組み合わせとして表現し、それぞれに対応する公理を組み合わせます。

---

## 3.4.5 対応理論の応用

### モデル設計への応用

対応理論は、特定の領域をモデル化する際の強力な道具となります。目標とするシステムの性質をフレーム条件として形式化し、対応する公理を選択することで、適切な論理体系を構築できます。

例えば、時間推論システムを設計する場合を考えてみましょう。時間は通常、推移的（過去の過去は過去）で、非対称（過去と未来は異なる）です。これらの性質に対応する公理（4公理など）を選択し、時相論理を構築します。

同様に、知識表現システムでは、知識の性質（真理性、正の内省など）に応じて適切な公理を選択します。S4やS5などの既存の体系を出発点として、領域固有の要求に応じて修正を加えることもできます。

### 自動推論への応用

対応理論は、自動推論システムの最適化にも貢献します。フレーム条件が分かれば、その条件を活用した効率的な推論アルゴリズムを設計できます。

例えば、推移的フレームでは、到達可能性の推移閉包を事前計算することで、□演算子の評価を高速化できます。同値関係フレーム（S5）では、各同値類を独立に処理することで、問題を分解できます。

### 論理体系の発見

対応理論により、新しい論理体系の系統的な探索が可能になります。興味深いフレーム条件を特定し、対応する公理を見つけることで、新しい様相論理を発見できます。

例えば、「密度」（任意の二つの世界の間に第三の世界が存在）という性質は、実数の稠密性をモデル化する際に有用です。この性質に対応する公理 □□p → □p を含む論理体系は、連続的な変化を扱う応用で重要な役割を果たします。

!!! tip "対応理論の実践的活用"

    対応理論を活用する際の指針：
    
    1. **目標の明確化**：モデル化したいシステムの性質を明確にする
    2. **フレーム条件の形式化**：性質を数学的に厳密に表現
    3. **対応の探索**：既知の対応を参照、または新たに導出
    4. **体系の構築**：対応する公理から論理体系を構成
    5. **検証と調整**：実際の応用で体系を検証し、必要に応じて調整

---

## まとめ

この節では、様相論理の公理とフレーム条件の間の深い対応関係を学習しました。重要なポイントは以下の通りです：

対応理論は、様相論理の構文（公理）と意味（フレーム条件）を結ぶ架け橋として機能します。T公理と反射性、4公理と推移性など、基本的な対応関係は、論理的原理と数学的構造の間の自然な関係を示しています。

サールクヴィストの定理により、広いクラスの公理について、対応するフレーム条件の存在と計算可能性が保証されます。この定理は、対応理論を実用的な道具として確立する上で決定的な役割を果たしました。

逆対応の問題とGoldblatt-Thomason定理により、様相論理の表現力の限界が明確になりました。すべてのフレーム性質が様相論理で表現可能なわけではないという事実は、論理の本質的な制約を示しています。

対応理論の応用は、モデル設計、自動推論、新しい論理体系の発見など、多岐にわたります。理論と実践を結ぶこの理論は、様相論理を実世界の問題に適用する際の重要な指針を提供します。

### 次節への展望

次の第5節「証明論的意味論」【発展】では、証明そのものから意味を構成するという、より高度なアプローチを学習します。これにより、様相論理の意味論的基礎をさらに深く理解することができます。

---

## 参考文献

- Blackburn, P., de Rijke, M., & Venema, Y. (2001). *Modal Logic*. Cambridge University Press.
- van Benthem, J. (1984). Correspondence theory. In D. Gabbay & F. Guenthner (Eds.), *Handbook of Philosophical Logic* (Vol. 2, pp. 167-247). Reidel.
- Goldblatt, R., & Thomason, S. K. (1974). Axiomatic classes in propositional modal logic. In J. Crossley (Ed.), *Algebraic Logic* (pp. 163-173). Springer.
- Sahlqvist, H. (1975). Completeness and correspondence in the first and second order semantics for modal logic. In S. Kanger (Ed.), *Proceedings of the Third Scandinavian Logic Symposium* (pp. 110-143). North-Holland.
- Kracht, M. (1999). *Tools and Techniques in Modal Logic*. Elsevier.
- Venema, Y. (2007). Algebras and coalgebras. In P. Blackburn, J. van Benthem, & F. Wolter (Eds.), *Handbook of Modal Logic* (pp. 331-426). Elsevier.